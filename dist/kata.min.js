let e=/ on([a-z]+)\s*=\s*(["'])?\s*?$/,t={"'":/^\s*'/,'"':/^\s*"/},r="data-kata-ev",l="data-kata-embed";export default function(o,...a){let n=[],f=[],i="",d=Array.from(o);for(let o of a)if("function"==typeof o)i+=d.shift().replace(e,(e,l,a)=>{let n=f.push({event:l,handler:o})-1;return a&&d[0]&&(d[0]=d[0].replace(t[a],"")),` ${r}="${n}"`});else{i+=d.shift();for(let e of[].concat(o))if("object"==typeof e&&"number"==typeof e.nodeType&&[1,3,8,11].includes(e.nodeType)){let t=n.push(e)-1;i+=`<div ${l}="${t}"></div>`}else i+=e}i+=d.shift();let c=document.createRange().createContextualFragment(i.trim());return c.querySelectorAll(`*[${r}]`).forEach(e=>{let t=f[e.getAttribute(r)];e.addEventListener(t.event,t.handler),e.removeAttribute(r)}),c.querySelectorAll(`*[${l}]`).forEach(e=>{let t=n[e.getAttribute(l)];e.before(t,e),e.remove()}),1==c.childNodes.length?c.firstChild:c};
