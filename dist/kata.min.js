let e=/ on([a-z]+)\s*=\s*(["'])?\s*?$/,t={"'":/^\s*'/,'"':/^\s*"/};export default function(r,...n){let a=Array.from(r),l="",d=[],o=[];for(let r of n)if("function"==typeof r)l+=a.shift().replace(e,(e,n,l)=>{let o=d.push({event:n,handler:r})-1;return l&&a[0]&&(a[0]=a[0].replace(t[l],"")),` data-event-handler-replacement="${o}"`});else{l+=a.shift();for(let e of Array.isArray(r)?r:[r])if("string"==typeof e)l+=e;else if("object"==typeof e&&"number"==typeof e.nodeType)switch(e.nodeType){case 1:case 3:case 8:case 11:l+=`<div data-embedded-content-replacement="${o.push(e)-1}"></div>`}else console.log("unknown chunk",e)}l+=a.shift();let c=document.createRange().createContextualFragment(l.trim());return c.querySelectorAll("*[data-event-handler-replacement]").forEach(e=>{let t=d[e.getAttribute("data-event-handler-replacement")];e.addEventListener(t.event,t.handler),e.removeAttribute("data-event-handler-replacement")}),c.querySelectorAll("*[data-embedded-content-replacement]").forEach(e=>{let t=o[e.getAttribute("data-embedded-content-replacement")];e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}),1==c.childNodes.length&&(c=c.firstChild),c};
